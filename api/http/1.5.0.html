<!DOCTYPE html>
<html>
   <head>
      <meta name="generator"
      content="HTML Tidy for HTML5 (experimental) for Windows https://github.com/w3c/tidy-html5/tree/c63cc39" />
      <title>RedEdge HTTP API</title>
      <link rel="stylesheet" href="../../stylesheets/markdown.css" />
   </head>
   <body>
      <article class="markdown-body">
         <h1 id="rededge-http-control-api">RedEdge HTTP Control API</h1>
         <p>This document describes the protocol which can be be used by software to control the RedEdge multi-spectral camera. The
         camera can be controlled using HTTP via either the ethernet connector or the 802.11 WIFI access point. For more detailed
         information on connecting to the camera, see the RedEdge Users's Guide.</p>
         <h1 id="table-of-contents">Table of Contents</h1>
         <ul>
            <li>
               <a href="#rededge-http-control-api">RedEdge HTTP Control API</a>
            </li>
            <li>
               <a href="#table-of-contents">Table of Contents</a>
            </li>
            <li>
               <a href="#general-protocol-overview">General Protocol Overview</a>
            </li>
            <li>
               <a href="#routes">Routes</a>
               <ul>
                  <li>
                     <a href="#config-[/config]">Config [/config]</a>
                  </li>
                  <li>
                     <a href="#camera-exposure-[/exposure]">Camera Exposure [/exposure]</a>
                  </li>
                  <li>
                     <a href="#version-information-[/version]">Version Information [/version]</a>
                  </li>
                  <li>
                     <a href="#status-[/status]">Status [/status]</a>
                  </li>
                  <li>
                     <a href="#command-capture-[/capture]">Command Capture [/capture]</a>
                  </li>
                  <li>
                     <a href="#capture-status-request-[/capture/:id]">Capture Status Request [/capture/:id]</a>
                  </li>
                  <li>
                     <a href="#camera-position-[/gps]">Camera position [/gps]</a>
                  </li>
                  <li>
                     <a href="#camera-orientation-[/orientation]">Camera Orientation [/orientation]</a>
                  </li>
                  <li>
                     <a href="#vignette-calibration-[/calibration/vignette]">Vignette Calibration [/calibration/vignette]</a>
                  </li>
                  <li>
                     <a href="#distortion-calibration-[/calibration/distortion]">Distortion Calibration
                     [/calibration/distortion]</a>
                  </li>
                  <li>
                     <a href="#camera-information-[/camera_info]">Camera Information [/camera_info]</a>
                  </li>
                  <li>
                     <a href="#kml-captures-[/captures.kml]">KML Captures [/captures.kml]</a>
                  </li>
                  <li>
                     <a href="#wifi-configuration-[/wifi]">Wifi Configuration [/wifi]</a>
                  </li>
                  <li>
                     <a href="#file-access-[/files/*]">File Access [/files/*]</a>
                  </li>
                  <li>
                     <a href="#network-status-[/networkstatus]">Network Status [/networkstatus]</a>
                  </li>
               </ul>
            </li>
         </ul>
         <h1 id="general-protocol-overview">General Protocol Overview</h1>
         <p>The API is accessed via HTTP connection to port 80 at the camera IP address. All data is exchanged in the JSON
         format.</p>
         <p>The actual value of the IP address depends on the configuration. When accessing the camera via its WIFI access point,
         the camera IP address will be 192.168.10.254. When the camera is connected to an Ethernet network, the camera IP address
         will be 192.168.1.83 by default.</p>
         <p>NOTE: Future software updates will allow the camera to support assignment of IP addresses via DHCP, and will support a
         broadcast-based device discovery protocol for locating cameras on a network.</p>
         <h1 id="routes">Routes</h1>
         <h2 id="config-[/config]">Config [/config]</h2>
         <p>The config object contains camera configuration options. These options are persistent between camera power cycles,
         except where exceptions are noted.</p>
         <p>
         <strong>URL</strong>: /config/</p>
         <p>
         <strong>Supported verbs</strong>: GET, POST</p>
         <p>Object properties:</p>
         <table>
            <thead>
               <tr>
                  <th>Property</th>
                  <th>Type</th>
                  <th>Description</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td>streaming_enable</td>
                  <td>boolean</td>
                  <td>Enable continuous rapid capture of JPEG previews</td>
               </tr>
               <tr>
                  <td>preview_band</td>
                  <td>string</td>
                  <td>Selects band(s) to be rendered in preview JPEG
                  <br />Allowable values: "band1", "band2", "band3", "band4", "band5", "multi"</td>
               </tr>
               <tr>
                  <td>operating_alt</td>
                  <td>integer</td>
                  <td>Aircraft operating altitude above ground (meters)</td>
               </tr>
               <tr>
                  <td>overlap_along_track</td>
                  <td>integer</td>
                  <td>Desired along track overlap percentage (0-100)</td>
               </tr>
               <tr>
                  <td>overlap_cross_track</td>
                  <td>integer</td>
                  <td>Desired cross track overlap percentage (0-100)</td>
               </tr>
               <tr>
                  <td>auto_cap_mode</td>
                  <td>string</td>
                  <td>Auto capture mode. Allowable values: "disabled", "overlap", "timer", "ext"</td>
               </tr>
               <tr>
                  <td>timer_period</td>
                  <td>float</td>
                  <td>Period between timer captures (seconds)</td>
               </tr>
               <tr>
                  <td>ext_trigger_mode</td>
                  <td>string</td>
                  <td>Allowable values: "rising", "falling", "longpwm", "shortpwm"</td>
               </tr>
               <tr>
                  <td>pwm_trigger_threshold</td>
                  <td>float</td>
                  <td>The long/short pulse width threshold for PWM input, in miliseconds</td>
               </tr>
               <tr>
                  <td>enabled_bands_raw</td>
                  <td>integer</td>
                  <td>Bit mask of bands that are enabled for raw capture storage</td>
               </tr>
               <tr>
                  <td>enabled_bands_jpeg</td>
                  <td>integer</td>
                  <td>Bit mask of bands enabled for jpeg capture and storage</td>
               </tr>
               <tr>
                  <td>enable_man_exposure</td>
                  <td>boolean</td>
                  <td>When true, the user-provided exposure settings are used instead of the automatic exposure control. This field
                  is not persistent.</td>
               </tr>
               <tr>
                  <td>gain_exposure_crossover</td>
                  <td>float</td>
                  <td>Exposure time (in seconds) at which the gain should be increased in order to properly expose rather than
                  increasing the exposure time further.</td>
               </tr>
               <tr>
                  <td>ip_address</td>
                  <td>string</td>
                  <td>Sets the Ethernet IP address of the camera. Must be a valid IP address, e.g. "123.456.789.012".</td>
               </tr>
               <tr>
                  <td>raw_format</td>
                  <td>string</td>
                  <td>Selects what raw output format the camera saves as. Allowable values: "TIFF", "DNG".</td>
               </tr>
               <tr>
                  <td>network_mode</td>
                  <td>string</td>
                  <td>Selects whether the camera will act as a master or slave in a MicaSense network. Allowable values: "master",
                  "slave".</td>
               </tr>
            </tbody>
         </table>
         <p>Update (POST) requests may provide any subset of the config properties as parameters and only those properties that are
         provided will be modified.</p>
         <p>
         <strong>Example JSON Data for POST</strong>: Providing the following JSON object as the body of a POST to /config will
         update the 'streaming_enable' and 'timer_period' options, while leaving all other options unchanged.</p>
         <pre>
<code>{
   "streaming_enable" : false,
   "timer_period" : 1.0
}</code>
</pre>
         <h2 id="camera-exposure-[/exposure]">Camera Exposure [/exposure]</h2>
         <p>
         <strong>URL</strong>: /exposure/</p>
         <p>
         <strong>Supported verbs</strong>: GET, POST</p>
         <p>The camera exposure object controls the camera's exposure mode, and sets manual exposure values. Manual exposure values
         are only used when the enable_man_exposure field in the config object is set to true. The exposure settings are 
         <strong>not persistent</strong> and the camera will revert to the default behavior of automatic exposure control when it
         is powered off.</p>
         <p>Note: Automatic exposure mode is recommended during normal operation. The camera has automatic gain and exposure
         control (AGC) rules which are designed for aerial data collection. The AGC rules will prevent blurring in most cases by
         first increasing imager gain, and will prevent over-exposure of bright subjects.</p>
         <p>The exposure properties are expressed in miliseconds. The gain properties must be integers with a value of 1, 2, 4 or
         8.</p>
         <table>
            <thead>
               <tr>
                  <th>Property</th>
                  <th>Type</th>
                  <th>Description</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td>exposure1</td>
                  <td>float</td>
                  <td>Exposure (in ms) for sensor #1</td>
               </tr>
               <tr>
                  <td>exposure2</td>
                  <td>float</td>
                  <td>Exposure (in ms) for sensor #2</td>
               </tr>
               <tr>
                  <td>exposure3</td>
                  <td>float</td>
                  <td>Exposure (in ms) for sensor #3</td>
               </tr>
               <tr>
                  <td>exposure4</td>
                  <td>float</td>
                  <td>Exposure (in ms) for sensor #4</td>
               </tr>
               <tr>
                  <td>exposure5</td>
                  <td>float</td>
                  <td>Exposure (in ms) for sensor #5</td>
               </tr>
               <tr>
                  <td>gain1</td>
                  <td>int</td>
                  <td>Gain for sensor #1. Allowed values: [1,2,4,8]</td>
               </tr>
               <tr>
                  <td>gain2</td>
                  <td>int</td>
                  <td>Gain for sensor #2. Allowed values: [1,2,4,8]</td>
               </tr>
               <tr>
                  <td>gain3</td>
                  <td>int</td>
                  <td>Gain for sensor #3. Allowed values: [1,2,4,8]</td>
               </tr>
               <tr>
                  <td>gain4</td>
                  <td>int</td>
                  <td>Gain for sensor #4. Allowed values: [1,2,4,8]</td>
               </tr>
               <tr>
                  <td>gain5</td>
                  <td>int</td>
                  <td>Gain for sensor #5. Allowed values: [1,2,4,8]</td>
               </tr>
            </tbody>
         </table>
         <p>Example object:</p>
         <pre>
<code>{
   "exposure1" : 0.06,
   "exposure2" : 1.0,
   "exposure3" : 8.0,
   "exposure4" : 25.0,
   "exposure5" : 0.5,
   "gain1" : 1,
   "gain2" : 2,
   "gain3" : 4,
   "gain4" : 8,
   "gain5" : 1,
}</code>
</pre>
         <h2 id="version-information-[/version]">Version Information [/version]</h2>
         <p>
         <strong>URL</strong>: /version</p>
         <p>
         <strong>Supported Verbs</strong>: GET</p>
         <p>This read-only object contains the software version and the device serial number.</p>
         <table>
            <thead>
               <tr>
                  <th>Property</th>
                  <th>Type</th>
                  <th>Description</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td>sw_version</td>
                  <td>string</td>
                  <td>The version of software installed on the camera</td>
               </tr>
               <tr>
                  <td>serial</td>
                  <td>string</td>
                  <td>The camera serial number</td>
               </tr>
            </tbody>
         </table>
         <p>Example response:</p>
         <pre>
<code>{
    "sw_version" : "v1.2.3",
    "serial" : "1220001"
}</code>
</pre>
         <h2 id="status-[/status]">Status [/status]</h2>
         <p>
         <strong>URL</strong>: /status</p>
         <p>
         <strong>Supported Verbs</strong>: GET</p>
         <p>This read-only object returns the current camera status information.</p>
         <table>
            <thead>
               <tr>
                  <th style="text-align: left">Property</th>
                  <th style="text-align: center">Type</th>
                  <th>Description</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td style="text-align: left">sd_gb_free</td>
                  <td style="text-align: center">float</td>
                  <td>The amount of free space on the SD card (GB)</td>
               </tr>
               <tr>
                  <td style="text-align: left">sd_gb_total</td>
                  <td style="text-align: center">float</td>
                  <td>The total amount of storage on the SD card (GB)</td>
               </tr>
               <tr>
                  <td style="text-align: left">sd_warn</td>
                  <td style="text-align: center">bool</td>
                  <td>When true, indicates the low SD space warning threshold is met</td>
               </tr>
               <tr>
                  <td style="text-align: left">sd_status</td>
                  <td style="text-align: center">string</td>
                  <td>Status of the SD card, one of "Ok, NotPresent, ReadError, Full"</td>
               </tr>
               <tr>
                  <td style="text-align: left">bus_volts</td>
                  <td style="text-align: center">float</td>
                  <td>The measured supply voltage</td>
               </tr>
               <tr>
                  <td style="text-align: left">gps_used_sats</td>
                  <td style="text-align: center">int</td>
                  <td>The number of satellites used by GPS fix</td>
               </tr>
               <tr>
                  <td style="text-align: left">gps_vis_sats</td>
                  <td style="text-align: center">int</td>
                  <td>The number of visible GPS satellites</td>
               </tr>
               <tr>
                  <td style="text-align: left">gps_warn</td>
                  <td style="text-align: center">bool</td>
                  <td>True when the GPS receiver reports interference detected</td>
               </tr>
               <tr>
                  <td style="text-align: left">gps_lat</td>
                  <td style="text-align: center">float</td>
                  <td>The current latitude (radians)</td>
               </tr>
               <tr>
                  <td style="text-align: left">gps_lon</td>
                  <td style="text-align: center">float</td>
                  <td>The current longitude (radians)</td>
               </tr>
               <tr>
                  <td style="text-align: left">course</td>
                  <td style="text-align: center">float</td>
                  <td>The direction of travel in NED</td>
               </tr>
               <tr>
                  <td style="text-align: left">alt_agl</td>
                  <td style="text-align: center">float</td>
                  <td>Altitude above ground level</td>
               </tr>
               <tr>
                  <td style="text-align: left">alt_msl</td>
                  <td style="text-align: center">float</td>
                  <td>Altitude above mean sea level</td>
               </tr>
               <tr>
                  <td style="text-align: left">p_acc</td>
                  <td style="text-align: center">float</td>
                  <td>Positional accuracy of GPS fix</td>
               </tr>
               <tr>
                  <td style="text-align: left">utc_time</td>
                  <td style="text-align: center">datetime</td>
                  <td>Format YYYY-MM-DDTHH:MM:SS.SSS</td>
               </tr>
               <tr>
                  <td style="text-align: left">vel_2d</td>
                  <td style="text-align: center">float</td>
                  <td>Horizontal velocity (m/s)</td>
               </tr>
               <tr>
                  <td style="text-align: left">sv_info</td>
                  <td style="text-align: center">array</td>
                  <td>Array of svinfo objects (see below)</td>
               </tr>
               <tr>
                  <td style="text-align: left">auto_cap_active</td>
                  <td style="text-align: center">bool</td>
                  <td>True indicates that the camera's automatic capture mode is activated</td>
               </tr>
            </tbody>
         </table>
         <p>
            <strong>SVINFO Sub-object</strong>
         </p>
         <table>
            <thead>
               <tr>
                  <th style="text-align: left">Property</th>
                  <th style="text-align: center">Type</th>
                  <th>Description</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td style="text-align: left">azimuth</td>
                  <td style="text-align: center">float</td>
                  <td>Satellite azimuth (deg)</td>
               </tr>
               <tr>
                  <td style="text-align: left">elevation</td>
                  <td style="text-align: center">float</td>
                  <td>Satellite elevation (deg)</td>
               </tr>
               <tr>
                  <td style="text-align: left">channel</td>
                  <td style="text-align: center">int</td>
                  <td>Receiver channel</td>
               </tr>
               <tr>
                  <td style="text-align: left">cno</td>
                  <td style="text-align: center">int</td>
                  <td>Satellite carrier-to-noise ratio</td>
               </tr>
               <tr>
                  <td style="text-align: left">used_flag</td>
                  <td style="text-align: center">bool</td>
                  <td>Satellite is being used in the position fix</td>
               </tr>
               <tr>
                  <td style="text-align: left">diff_flag</td>
                  <td style="text-align: center">bool</td>
                  <td>Satellite is using differential corrections</td>
               </tr>
               <tr>
                  <td style="text-align: left">orbit_info</td>
                  <td style="text-align: center">bool</td>
                  <td>Receiver has some orbital infomation about this satellite</td>
               </tr>
               <tr>
                  <td style="text-align: left">orbit 
                  <em>is</em>eph</td>
                  <td style="text-align: center">bool</td>
                  <td>Orbital information is ephemeris data</td>
               </tr>
               <tr>
                  <td style="text-align: left">sv_healthy</td>
                  <td style="text-align: center">bool</td>
                  <td>This satellite is healthy and can be used for positioning</td>
               </tr>
               <tr>
                  <td style="text-align: left">svid</td>
                  <td style="text-align: center">int</td>
                  <td>Space Vehicle ID</td>
               </tr>
               <tr>
                  <td style="text-align: left">quality</td>
                  <td style="text-align: center">int</td>
                  <td>Quality indicator for this satellite</td>
               </tr>
            </tbody>
         </table>
         <p>Example GET response:</p>
         <pre>
<code>{
   "alt_agl": 14.798,
   "alt_msl": 283.55,
   "auto_cap_active": false,
   "bus_volts": 3.695,
   "course": 169.4142636445688,
   "gps_lat": 36.2709446,
   "gps_lon": -104.7104612,
   "gps_time": "2014-11-13T18:34:12.345Z",
   "gps_used_sats": 5,
   "gps_vis_sats": 16,
   "gps_warn": false,
   "p_acc": 0,
   "sd_gb_free": 0,
   "sd_gb_total": 0,
   "sd_warn": true,
   "sd_status": "NotPresent",
   "utc_time": "2014-11-13T18:34:0.000Z",
   "vel_2d": 0.08,
   "sv_info": [
      {
         "azimuth": 0.8203047513961792,
         "channel": 9,
         "cno": 41,
         "diff_flag": false,
         "elevation": 0.6108652353286743,
         "orbit_info": true,
         "orbit_is_eph": true,
         "quality": 7,
         "sv_healthy": false,
         "svid": 5,
         "used_flag": false
      },
      {
         "azimuth": 0,
         "channel": 14,
         "cno": 15,
         "diff_flag": false,
         "elevation": -1.588249564170837,
         "orbit_info": false,
         "orbit_is_eph": false,
         "quality": 3,
         "sv_healthy": false,
         "svid": 8,
         "used_flag": false
      },
      ...
   ]
}
</code>
</pre>
         <h2 id="command-capture-[/capture]">Command Capture [/capture]</h2>
         <p>
         <strong>URL</strong>: /capture</p>
         <p>
         <strong>Supported verbs</strong>: GET,POST</p>
         <p>The camera can be commanded to take a capture by either a GET or POST request to this URL. Both actions have the same
         effect. The command can take several arguments, provided as parameters in the URL or as a JSON body.</p>
         <p>When using the preview option, the a new JPEG preview image will be generated based on the preview_band option in the
         configuration settings. This preview is the image displayed on the web server user interface.</p>
         <p>The cache_jpg and cache_raw parameters allow the user to create and cache images in camera RAM, for temporary access
         without impacting SD card data thoughput. The images saved to the SD card for any given capture are still controlled by
         the main configuration settings. This allows, for example, a user to cache jpegs from two bands to be retrieved quickly
         during flight, while still saving RAW images to the SD card for later retreival. Note that cached image files are only
         available temporarily. Cached files are kept only for the last two capture commands which had non-zero cache_raw or
         cache_jpeg arguments, so it is important if you are downloading these cached files that you finish downloading the file
         before issueing more than one subsequent capture command (only captures with caching enabled count here).</p>
         <p>
            <strong>Arguments</strong>
         </p>
         <table>
            <thead>
               <tr>
                  <th>Argument</th>
                  <th>Type</th>
                  <th>Description</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td>preview</td>
                  <td>bool</td>
                  <td>If true, updates the current preview image. Defaults to 'false'.</td>
               </tr>
               <tr>
                  <td>anti_sat</td>
                  <td>bool</td>
                  <td>If true, strong anti-saturation rules are used for the capture</td>
               </tr>
               <tr>
                  <td>cache_jpeg</td>
                  <td>int</td>
                  <td>Bitmask for bands from which to capture and cache JPEG images. Defaults to 0.</td>
               </tr>
               <tr>
                  <td>cache_raw</td>
                  <td>int</td>
                  <td>Bitmask for bands from which to capture and cache RAW (tiff) images. Defaults to 0.</td>
               </tr>
               <tr>
                  <td>store_capture</td>
                  <td>bool</td>
                  <td>Store this image to the SD card based on configuration settings.
                  <br />Defaults to true. (JPEG and/or RAW may be stored depending on configuration)</td>
               </tr>
               <tr>
                  <td>block</td>
                  <td>bool</td>
                  <td>When 'true', the HTTP request will not return until the capture is complete. Defaults to 'false'.</td>
               </tr>
            </tbody>
         </table>
         <p>
         <strong>Example URL:</strong> 
         <code>/capture?preview=true</code> captures an image, generating a preview JPEG and saving RAW files to the SD card</p>
         <p>For bit masks, bit 0 corresponds to imager #1, bit 1 to imager #2, and so forth. As an example, to capture all five
         bands, the bit mask value should be 31 (In binary: 11111). To capture only band #4, the value should be 8 (01000).</p>
         <p>The response will always be a JSON object, however the contents of the JSON object can vary depending on the provided
         arguments.</p>
         <p>
            <strong>Response Properties</strong>
         </p>
         <table>
            <thead>
               <tr>
                  <th style="text-align: left">Property</th>
                  <th style="text-align: center">Type</th>
                  <th>Description</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td style="text-align: left">status</td>
                  <td style="text-align: center">string</td>
                  <td>One of 'pending', 'complete', 'error'</td>
               </tr>
               <tr>
                  <td style="text-align: left">id</td>
                  <td style="text-align: center">string</td>
                  <td>ID representing this capture. Save this to retrieve the status of a capture later.</td>
               </tr>
               <tr>
                  <td style="text-align: left">time
                  <br />( 
                  <em>optional</em>)</td>
                  <td style="text-align: center">string</td>
                  <td>ISO8601 datetime string providing the UTC time of actual image capture. This property is only present if the
                  block argument is true</td>
               </tr>
               <tr>
                  <td style="text-align: left">jpeg_cache_path
                  <br />( 
                  <em>optional</em>)</td>
                  <td style="text-align: center">object</td>
                  <td>An object containing a property for each band for which JPEG cacheing was enabled. (e.g. '1', '2', ...). The
                  value of each property is the path to retrieve the cached JPEG file for that band. This property is only present
                  if cache_jpg was non-zero and the block arguments was true</td>
               </tr>
               <tr>
                  <td style="text-align: left">raw_cache_path
                  <br />( 
                  <em>optional</em>)</td>
                  <td style="text-align: center">object</td>
                  <td>Like jpeg_cache_path, but for cached raw images</td>
               </tr>
            </tbody>
         </table>
         <p>If the block argument is false, then the status property in the response will always be 'pending' or 'error'. When
         block is set to true, then the status property will be either 'complete' or 'error'.</p>
         <p>Note that blocking calls return as soon as the capture is complete, and the cached files are available for download.
         The files may not have been transferred to the SD card storage yet. You may use the /capture/:id route to lookup results
         for a previous capture (including the location of SD card files after they are saved).</p>
         <p>
         <strong>Example Responses</strong>:</p>
         <p>In the first response, jpeg and tiff files were commanded to be cached for bands 1, 2, and 5. The store_capture
         parameter was true, so bands 1-4 were stored as both JPG and raw files. The actual bands that are stored to the card
         depends on the current configuration settings.</p>
         <pre>
<code>{
   "status" : "complete",
   "id" : "i89jfi73irj49f74",
   "time" : "2014-10-08T20:27:16.321Z",
   "jpeg_cache_path" : {
      "1" : "/images/i89jfi73irj49f74_1.jpg",
      "2" : "/images/i89jfi73irj49f74_2.jpg",
      "5" : "/images/i89jfi73irj49f74_5.jpg"
   },
   "raw_cache_path" : {
      "1" : "/images/i89jfi73irj49f74_1.tif",
      "2" : "/images/i89jfi73irj49f74_2.tif",
      "5" : "/images/i89jfi73irj49f74_5.tif"
   }
}</code>
</pre>
         <p>The following response can be expected when block is false, because the capture has not been completed when the object
         is returned.</p>
         <pre>
<code>{
   "status" : "pending",
   "id' : "i89jfi73irj49f74"
}</code>
</pre>
         <h2 id="capture-status-request-[/capture/:id]">Capture Status Request [/capture/:id]</h2>
         <p>
         <strong>URL</strong>: /capture/:id</p>
         <p>
         <strong>Supported verbs</strong>: GET</p>
         <p>
         <strong>Example URL</strong>: 
         <code>/capture/i89jfi73irj49f74</code></p>
         <p>This route can be called to poll the status of a previously commanded capture. Only those paths that are valid for the
         capture will be shown. For example, if no cached files were requested for this capture, then the jpeg_cache_path and
         raw_cache_path fields will not be present.</p>
         <p>
         <strong>Example Responses</strong>:</p>
         <pre>
<code>{
   "status" : "complete",
   "id" : "i89jfi73irj49f74",
   "time" : "2014-10-08T20:27:16.321Z",
   "jpeg_cache_path" : {
      "1" : "/images/i89jfi73irj49f74_1.jpg",
      "2" : "/images/i89jfi73irj49f74_2.jpg",
      "5" : "/images/i89jfi73irj49f74_5.jpg"
   },
   "raw_cache_path" : {
      "1" : "/images/i89jfi73irj49f74_1.tif",
      "2" : "/images/i89jfi73irj49f74_2.tif",
      "5" : "/images/i89jfi73irj49f74_5.tif"
   },
   "jpeg_storage_path" : {
      "1" : "/files/0021SET/000/IMG_0000_1.jpg",
      "2" : "/files/0021SET/000/IMG_0000_2.jpg",
      "3" : "/files/0021SET/000/IMG_0000_3.jpg",
      "4" : "/files/0021SET/000/IMG_0000_4.jpg"
   },
   "raw_storage_path" : {
      "1" : "/files/0021SET/000/IMG_0000_1.tif",
      "2" : "/files/0021SET/000/IMG_0000_2.tif",
      "3" : "/files/0021SET/000/IMG_0000_3.tif",
      "4" : "/files/0021SET/000/IMG_0000_4.tif"
   }
}</code>
</pre>
         <h2 id="camera-position-[/gps]">Camera position [/gps]</h2>
         <p>
         <strong>URL</strong>: /gps</p>
         <p>
         <strong>Supported verbs</strong>: GET, POST</p>
         <p>This command can be used to retrieve the current gps solution, or to provide a solution to the camera.</p>
         <p>This command can be used in lieu of an external GPS attached to the camera to provide the camera with a position (for
         example, from the aircraft GPS). Anytime this value has been written in the last 30 seconds, it will take priority over a
         camera attached GPS and will be used instead of the attached GPS when writing image metadata.</p>
         <table>
            <thead>
               <tr>
                  <th>Property</th>
                  <th>Type</th>
                  <th>Description</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td>latitude</td>
                  <td>float</td>
                  <td>The camera latitude in radians</td>
               </tr>
               <tr>
                  <td>longitude</td>
                  <td>float</td>
                  <td>The camera longitude in radians</td>
               </tr>
               <tr>
                  <td>altitude</td>
                  <td>float</td>
                  <td>The camera altitude above datum ellipsoid in meters</td>
               </tr>
               <tr>
                  <td>vel_n</td>
                  <td>float</td>
                  <td>The camera northing velocity in m/s</td>
               </tr>
               <tr>
                  <td>vel_e</td>
                  <td>float</td>
                  <td>The camera easting velocity in m/s</td>
               </tr>
               <tr>
                  <td>vel_d</td>
                  <td>float</td>
                  <td>The camera descent rate in m/s</td>
               </tr>
               <tr>
                  <td>p_acc</td>
                  <td>float</td>
                  <td>Camera positional accuracy in meters, one sigma</td>
               </tr>
               <tr>
                  <td>v_acc</td>
                  <td>float</td>
                  <td>Camera vertical accuracy in meters, one sigma</td>
               </tr>
               <tr>
                  <td>fix3d</td>
                  <td>bool</td>
                  <td>True if there is a valid 3D fix</td>
               </tr>
               <tr>
                  <td>utc_time</td>
                  <td>string</td>
                  <td>ISO8601 datetime string UTC time string</td>
               </tr>
            </tbody>
         </table>
         <p>
            <strong>Example Message</strong>
         </p>
         <pre>
<code>{
   "latitude" : 0.1363053,
   "longitude" : -2.399923234,
   "altitude" : 332.503,
   "vel_n" : 0.73,
   "vel_e" : 1.2,
   "vel_d" : 0.49,
   "p_acc" : 2.456,
   "v_acc" : 1.54,
   "fix3d" : true,
   "utc_time" : "2014-10-08T20:27:23.321Z"
}</code>
</pre>
         <h2 id="camera-orientation-[/orientation]">Camera Orientation [/orientation]</h2>
         <p>
         <strong>URL</strong>: /orientation</p>
         <p>
         <strong>Supported verbs</strong>: GET, POST</p>
         <p>This command retrieves or sets the current camera orientation.</p>
         <p>This command can be used to provide the orientation of the camera measured by an external source by POST'ing the
         orientation angles. Anytime this value has been written in the preceding 5 seconds, it will be considered valid and will
         be written to image metadata.</p>
         <p>Two rotations can be specified: An aircraft orientation and a camera orientation. The aircraft orientation gives the
         orientation of the aircraft relative to the earth frame, and the camera orientation gives the orientation of the fixed or
         gimbaled camera relative to the aircraft. If desired, the aircraft orientation can be set to zero, and in the case the
         camera orientation becomes relative to the earth. Alternatively, if the camera is fixed mounted, the camera orientation
         can be set to the appropriate static value and only the aircraft orientation is updated.</p>
         <p>The aircraft orientation is specified in the standard aeronautical coordinate frame, where the X axis points to the
         front of the vehicle, the Y axis points to the right, and the Z axis points down. Rotation order is Yaw, then Pitch, then
         Roll, about the Z, Y, then X axes accordingly.</p>
         <p>The camera orientation represents the orientation of the camera relative to the aircraft. The default orientation, when
         the camera angles are all zero, is defined such that the camera is pointed straight down relative to the aircraft
         (aircraft nadir) with the top of the camera towards the "front" of the aircraft. The rotation order is again yaw, then
         pitch, then roll, about the camera Z, Y, and X axes accordingly. The camera axes are defined such that at zero rotation
         angle, the X axis points down (along the camera focal axis) the Z axis points towards the rear of the vehicle, and the Y
         axis follows right-hand rule and points out the right side of the vehicle.</p>
         <p>The default value for these angles is zero. For a fixed camera pointed straight down relative to the aircraft, and with
         the top of the camera toward the front of the aircraft, this default value can be used.</p>
         <p>** POST properties **</p>
         <table>
            <thead>
               <tr>
                  <th>Property</th>
                  <th>Type</th>
                  <th>Description</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td>vehicle_roll</td>
                  <td>float</td>
                  <td>radians</td>
               </tr>
               <tr>
                  <td>vehicle_pitch</td>
                  <td>float</td>
                  <td>radians</td>
               </tr>
               <tr>
                  <td>vehicle_yaw</td>
                  <td>float</td>
                  <td>radians</td>
               </tr>
               <tr>
                  <td>camera_roll</td>
                  <td>float</td>
                  <td>radians</td>
               </tr>
               <tr>
                  <td>camera_pitch</td>
                  <td>float</td>
                  <td>radians</td>
               </tr>
               <tr>
                  <td>camera_yaw</td>
                  <td>float</td>
                  <td>radians</td>
               </tr>
            </tbody>
         </table>
         <p>
            <strong>Example POST message</strong>
         </p>
         <pre>
<code>{
   "vehicle_roll" : -0.1512,
   "vehicle_pitch" : 0.1363053,
   "vehicle_yaw" : -0.399923234,
   "camera_roll" : 0.0,
   "camera_pitch" : 0.0,
   "camera_yaw" : 0.0
}</code>
</pre>
         <h2 id="vignette-calibration-[/calibration/vignette]">Vignette Calibration [/calibration/vignette]</h2>
         <p>
         <strong>URL</strong>: /calibration/vignette</p>
         <p>
         <strong>Supported verbs</strong>: GET</p>
         <p>Used to retrieve the lens vignette calibration parameters. One set of parameters is returned for each of the five
         cameras.</p>
         <p>
         <strong>Example URLs</strong>: 
         <code>GET /calibration/vignette</code></p>
         <p>
            <strong>Properties</strong>
         </p>
         <table>
            <thead>
               <tr>
                  <th>Property</th>
                  <th>Type</th>
                  <th>Description</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td>k</td>
                  <td>array</td>
                  <td>Array of vignette calibration coefficients [k0,k1,k2,k3,k4,k5]</td>
               </tr>
               <tr>
                  <td>cx</td>
                  <td>float</td>
                  <td>Vignette center x position in pixels</td>
               </tr>
               <tr>
                  <td>cy</td>
                  <td>float</td>
                  <td>Vignette center y position in pixels</td>
               </tr>
            </tbody>
         </table>
         <p>
            <strong>Example data</strong>
         </p>
         <pre>
<code>{
   "1" : {
      'k': [1.2e-1, 2.1e-2, 5.1e-2, 5.1e-3, 5.1e-4, 5.1e-5],
      'cx': 623.19,
      'cy': 495.24
   },
   "2" : {
      'k': [1.2e-1, 2.1e-2, 5.1e-2, 5.1e-3, 5.1e-4, 5.1e-5],
      'cx': 621.21,
      'cy': 477.90
   },
   "3": {
      ...
   },
   "4": {
      ...
   },
   "5": {
      ...
   }
}</code>
</pre>
         <h2 id="distortion-calibration-[/calibration/distortion]">Distortion Calibration [/calibration/distortion]</h2>
         <p>
         <strong>URL</strong>: /calibration/distortion</p>
         <p>
         <strong>Supported verbs</strong>: GET</p>
         <p>Used to retrieve the lens distortion calibration parameters for all five cameras. See the "RedEdge File Format ICD"
         document for more information regarding the lens calibration parameters.</p>
         <p>
            <strong>Properties</strong>
         </p>
         <table>
            <thead>
               <tr>
                  <th>Property</th>
                  <th>Type</th>
                  <th>Description</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td>k</td>
                  <td>array</td>
                  <td>Array of three lens radial coefficients [k1, k2, k3]</td>
               </tr>
               <tr>
                  <td>p</td>
                  <td>array</td>
                  <td>Array of two tangential coefficients [p1,p2]</td>
               </tr>
               <tr>
                  <td>fx</td>
                  <td>float</td>
                  <td>Effective lens focal length in the x direction in pixels</td>
               </tr>
               <tr>
                  <td>fy</td>
                  <td>float</td>
                  <td>Effective lens focal length in the y direction in pixels</td>
               </tr>
               <tr>
                  <td>cx</td>
                  <td>float</td>
                  <td>Lens center x position in pixels</td>
               </tr>
               <tr>
                  <td>cy</td>
                  <td>float</td>
                  <td>Lens center y position in pixels</td>
               </tr>
            </tbody>
         </table>
         <p>
            <strong>Example data</strong>
         </p>
         <pre>
<code>{
   "1": {
      'k' : [1.23e-1, 4.56e-2, 6.78e-3],
      'p' : [1.23e-1, 4.56e-2],
      'fx' : 1100.2,
      'fy' : 1101.7,
      'cx' : 623.76,
      'cy' : 473.54
   },
   "2": {
      'k' : [1.23e-1, 4.56e-2, 6.78e-3],
      'p' : [1.23e-1, 4.56e-2],
      'fx' : 1100.2,
      'fy' : 1101.7,
      'cx' : 623.76,
      'cy' : 473.54
   },
   "3": {
      ...
   },
   "4": {
      ...
   },
   "5": {
      ...
   }
}</code>
</pre>
         <h2 id="camera-information-[/camera_info]">Camera Information [/camera_info]</h2>
         <p>
         <strong>URL</strong>: /camera_info</p>
         <p>
         <strong>Supported verbs</strong>: GET</p>
         <p>This endpoint provides information physical information about the camera, including nominal lens parameters and
         information about the nominal filters installed for each band.</p>
         <p>
         <strong>Example URL</strong>: 
         <code>GET /camera_info</code></p>
         <p>
            <strong>Example Response to 
            <code>GET /camera_info</code></strong>
         </p>
         <pre>
<code>{
   "1" : {
      "type" : "bandpass",
      "center_nm": 498.2,
      "bandwidth_nm": 12,
      "focal_lenth_px" : 1100.0,
      "image_width": 1280,
      "image_height": 960
   },
   "2" : {
      "type" : "bandpass",
      "center_nm": 620.3,
      "bandwidth_nm": 10,
      "focal_length_px": 1100.0,
      "image_width": 1280,
      "image_height": 960
   },
   ...
}
</code>
</pre>
         <h2 id="kml-captures-[/captures.kml]">KML Captures [/captures.kml]</h2>
         <p>
         <strong>URL</strong>: /captures.kml</p>
         <p>
         <strong>Supported verbs</strong>: GET</p>
         <p>/captures.kml will return a kml file with the contents of all captures currently on the SD card. This is especially
         useful when flying multiple flights across one or more areas to ensure contiuous coverage across those areas.</p>
         <p>
            <strong>Example KML File</strong>
         </p>
         <pre>
<code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;kml xmlns="http://www.opengis.net/kml/2.2"&gt;
   &lt;Document&gt;
      &lt;Folder&gt;
         &lt;name&gt;"0000SET"&lt;/name&gt;
         &lt;Placemark&gt;
            &lt;name&gt;710&lt;/name&gt;
            &lt;Point&gt;
               &lt;coordinates&gt;-110.7228486,32.902748314,37.2748314&lt;/coordinates&gt;
            &lt;/Point&gt;
         &lt;/Placemark&gt;
         &lt;Placemark&gt;
            &lt;name&gt;711&lt;/name&gt;
            &lt;Point&gt;
               &lt;coordinates&gt;-110.72628388,32.902745594,37.2745594&lt;/coordinates&gt;
            &lt;/Point&gt;
         &lt;/Placemark&gt;
      &lt;/Folder&gt;
   &lt;/Document&gt;
&lt;/kml&gt;</code>
</pre>
         <h2 id="wifi-configuration-[/wifi]">Wifi Configuration [/wifi]</h2>
         <p>
         <strong>URL</strong>: /wifi</p>
         <p>
         <strong>Supported verbs</strong>: GET, POST</p>
         <p>
            <strong>Properties</strong>
         </p>
         <table>
            <thead>
               <tr>
                  <th>Property</th>
                  <th>Type</th>
                  <th>Description</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td>enable</td>
                  <td>bool</td>
                  <td>set to 'false' to disable wifi for this session</td>
               </tr>
            </tbody>
         </table>
         <p>
            <strong>Response</strong>
         </p>
         <pre>
<code>{
    "wifi_enabled" : false
}</code>
</pre>
         <p>NOTE: Disabling wifi from the wifi interface may not return a response. WiFi will be re-enabled when the camera is
         power-cycled</p>
         <h2 id="file-access-[/files/*]">File Access [/files/*]</h2>
         <p>
         <strong>URL</strong>: /files/path/on/sd/card</p>
         <p>
         <strong>Supported verbs</strong>: GET</p>
         <p>The file access API provides a method to get the contents of the SD card currently inserted in the camera. GET can
         return one of three alternatives:</p>
         <ol>
            <li>If the provided path describes a regular file, the file is returned.</li>
            <li>If the provided path describes a directory, a json object is returned that provides a directory listing as an array
            of descriptors for sub-directories and files at that path.</li>
            <li>If the provided path does not exist, a 404 with JSON error message is returned</li>
         </ol>
         <p>
         <strong>Example URLs</strong>:
         <br />
         <code>GET /files/</code>
         <br />
         <code>GET /files/000SET/</code>
         <br />
         <code>GET /files/001SET/000/IMG_1234_1.tif</code></p>
         <p>
         <strong>Example Response to 
         <code>GET /files/</code></strong>:</p>
         <pre>
<code>{
   "files": []
   "directories": ["0000SET", "0001SET", "0002SET"]
}</code>
</pre>
         <p>
         <strong>Example Response to 
         <code>GET /files/000SET</code></strong>:</p>
         <pre>
<code>{
   "files": [
      { "name": "paramlog.dat", "size": 3219234 }
   ],
   "directories": ["000"]
}</code>
</pre>
         <p>
         <strong>Example Response to 
         <code>GET /files/000SET/000</code></strong>:</p>
         <pre>
<code>{
   "files": [
      { "name": "IMG_0000_1.tif", "size": 5000000 },
      { "name": "IMG_0000_2.tif", "size": 5000000 },
      { "name": "IMG_0000_3.tif", "size": 5000000 },
      { "name": "IMG_0000_4.tif", "size": 5000000 },
      { "name": "IMG_0000_5.tif", "size": 5000000 }
   ],
   "directories": []
}</code>
</pre>
         <h2 id="network-status-[/networkstatus]">Network Status [/networkstatus]</h2>
         <p>
         <strong>URL</strong>: /networkstatus</p>
         <p>
         <strong>Supported Verbs</strong>: GET</p>
         <p>The network status API provides information about the MicaSense network, including all RedEdge cameras and DLS's. The
         devices are presented as an array called "network_map".</p>
         <p>
            <strong>Properties</strong>
         </p>
         <table>
            <thead>
               <tr>
                  <th>Property</th>
                  <th>Type</th>
                  <th>Description</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td>bands</td>
                  <td>array</td>
                  <td>A list of the center wavelengths of the sensors on the device, in nanometers (nm).</td>
               </tr>
               <tr>
                  <td>device_type</td>
                  <td>string</td>
                  <td>The type of device. Will report as either "camera" or "dls".</td>
               </tr>
               <tr>
                  <td>gps_source</td>
                  <td>string</td>
                  <td>Indicates where the device is receiving GPS information from. Will report as either an empty string,
                  "direct", or "host".</td>
               </tr>
               <tr>
                  <td>mode</td>
                  <td>string</td>
                  <td>Indicates which network mode the device is operating in.</td>
               </tr>
               <tr>
                  <td>serial</td>
                  <td>string</td>
                  <td>Reports the serial number of the device.</td>
               </tr>
               <tr>
                  <td>sw_version</td>
                  <td>string</td>
                  <td>Reports the software version currently running on the device.</td>
               </tr>
            </tbody>
         </table>
         <p>
         <strong>Example Reponse to 
         <code>GET /networkstatus</code></strong>:</p>
         <pre>
<code>{
   "network_map" : [
      {  "bands" : [475,560,670,670,717],
         "device_type" : "camera",
         "gps_source" : "",
         "mode" : "master",
         "serial" : "1449003LT",
         "sw_version" : "v1.5.3"
      },
      {  "bands" : [475,560,670,670,717],
         "device_type" : "dls",
         "gps_source" : "direct",
         "mode" : "slave",
         "serial" : "DL01-1525030-SC",
         "sw_version" : "v0.2.34"
      }
   ]
}</code>
</pre>
      </article>
   </body>
</html>
